<html>
    <head>
        <style>
            body {
                font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;;
                font-size: 14px;
                margin: 0;
                padding: 0;
            }
            a {
                text-decoration: none;
            }
            a:hover, a:visited {
                color: #59F;
            }
            #nav {
                position: fixed;
                padding: 0 20px;
                width: 200px;
                height: 100%;
                float: left;
                background-color: #eee;
                font-size: 13px;
            }
            #nav p {
                margin-bottom: 0;
            }
            #nav ol {
                margin-top: 0;
            }
            #post {
                margin-left: 240px;
                padding: 50px 100px 100px 100px;
                width: 500px;
            }
            #post .series, #post .title, #post .pubdate, #post .lastmodifdate {
                text-align: center;
            }
            #post .series {
                font-size: 18px;
            }
            #post .title {
                font-size: 32px;
                margin: 5px 0 10px;
            }
            #post .pubdate, #post .lastmodifdate {
                font-size: 11px;
            }
            #post .lastmodifdate {
                margin-bottom: 50px;
            }
            #post .pubdate:before {
                content: 'published: ';
            }
            #post .lastmodifdate:before {
                content: 'modified: ';
            }
            #post img {
                width: 100px;
                position: absolute;
                left: 900px;
            }
            #post p {
                text-align: justify;
                text-indent: 20px;
            }
        </style>
    </head>
    <body>
        <div id="nav">
<p><a href="/">Home</a></p>
<p>JS1k 2012</p>
<ol>
<li><a href="/2012/03/js1k-2012-part-1-introduction">Introduction</a></li>
<li><a href="/2012/03/js1k-2012-part-2-terrain-generation">Terrain generation</a></li>
<li><a href="/2012/03/js1k-2012-part-3-time-colours-and-light">Time, colours &amp; light</a></li>
<li><a href="/2012/03/js1k-2012-part-4-optimization-and-conclusion">Optimization &amp; conclusion</a></li>
</ol>
<p>JS1k 2013</p>
<ol>
<li><a href="/2013/04/js1k-2013-part-1-introduction">Introduction</a></li>
<li><a href="/2013/04/js1k-2013-part-2-tunnel-generation">Tunnel generation</a></li>
<li><a href="/2013/04/js1k-2013-part-3-rendering">Rendering</a></li>
<li><a href="/2013/05/js1k-2013-part-4-conclusion">Conclusion</a></li>
</ol>
<p>JS1k 2015</p>
<ol>
<li><a href="/2015/03/js1k-2015-part-1-introduction">Introduction</a></li>
<li><a href="/2015/04/js1k-2015-part-2-buggy-island">Buggy island</a></li>
</ol>
<p>Standalone JS1k demos</p>
<ol>
<li><a href="/js1k/2012-Mine[love]craft">Mine[love]craft</a></li>
<li><a href="/js1k/2013-Strange_crystals_II">Strange crystals II</a></li>
<li><a href="/js1k/2014-Buggy_island">Buggy island</a></li>
<li><a href="/js1k/2015-Islands">Islands</a></li>
<li><a href="/js1k/2016-Gliese_581_c">Gliese 581 c</a></li>
</ol>
        </div>
        <div id="post">
<div class="series">JS1k 2013</div>
<div class="title">Part 1 : introduction</div>
<div class="pubdate">2013-04-13</div>
<div class="lastmodifdate">2016-07-06</div>

<p><a class="illustration" href="//en.wikipedia.org/wiki/White_Rabbit">
    <img src="/assets/img/white-rabbit.jpg" title="&quot;Oh dear! Oh dear! I shall be too late!&quot;"/>
</a></p>
<p>Last year I stumbled upon <a title="JS1K" href="//js1k.com">the js1k contest </a>and it clicked at once. The combination of constraints and freedom, added to the fun and possibilities brought by javascript/canvas was a magic cocktail I couldn&#39;t resist. But since the competition had already started, I only had a few weeks to complete my entry, and though <a href="//js1k.com/1282" title="Mine[love]craft (js1k 2012)">my Mine[love]craft entry</a> was pretty satisfactory and ranked fourth, I was frustrated that many good ideas to improve it came to my mind too late. So this time I decided to start early, so that I could refactor my ideas/algorithms/functions as many times as necessary, while also having enough time to polish the details. Thus the first jsfiddle I wrote dates back to august 2012. However this did not protect me from the last minute syndrome, and my second version was <a title="Strange crystal II" href="//twitter.com/ehouais/status/318673499017338880">submitted</a> only a few minutes before the deadline.</p>
<p><a class="illustration" href="//en.wikipedia.org/wiki/Clockwork_universe">
    <img src="/assets/img/clockwork.jpg" title="Designing my own clockwork universe"/>
</a></p>
<p>This time, my goal was to implement a watch-only demo, because handling user input is costly, and since the instructions are not visible by default on the demo page, one is never sure that the visitors (including the judges) are aware of the controls. Both the subject of the demo and the graphical rendering technique came progressively to my mind, after I started optimizing the rendering of randomly generated <a title="octree" href="//en.wikipedia.org/wiki/Octree">3D voxel octrees</a>. The idea of a mine cart simulation has nothing to do with last year&#39;s mini minecraft, even if Minecraft fans have designed <a title="Beetle Juice - A Minecraft Roller Coaster" href="//www.youtube.com/watch?v=afcudstM9zA">some incredible mine cart rides</a>. What they have in common though is that they both try to fit seemingly complex but consistent universes in a small space, with much importance given to details. This is almost obsessive, and I surely would have been a watch maker in other times.</p>
<p><a class="illustration" href="//www.youtube.com/watch?v=8oaccb5NxOc">
    <img src="/assets/img/temple-of-doom.jpg" title="Indiana Jones and the Temple of Doom"/>
</a></p>
<p>The mine cart idea came with some heavy <a href="//www.youtube.com/watch?v=pvmXmIHjQ2E" title="Temple of Doom">cinematographic</a> <a href="//www.youtube.com/watch?v=z-o1cNXUzoE" title="Gringotts">references</a>, which increased the need to produce something as realistic as possible (update: there&#39;s also <a href="//www.youtube.com/watch?v=GQd3FFT7pnc" title="Rail Chase">a vintage game</a> I didn&#39;t know which uses the same rendering technique). I browsed many of the genre&#39;s clichés, keeping some of them (rails, sleepers, stull pieces, turns, slopes, lightbulbs, wooden bridges, stala[ct|gm]ites <a title="stalactites or stalagmites ?" href="//www.goodreads.com/quotes/253813-i-never-know-harry-called-to-hagrid-over-the-noise">&quot;what&#39;s the difference, Hagrid ?&quot;</a>), while eliminating others (bats, lava, underground lakes, etc.). I had at some point a small particle engine that allowed me to show burning torches and water streams, but its cost was a bit high. To add some story telling to the demo while making use of the last available bytes, I added the eponymous crystals and a few teasing words in the description and the tweets. I like the idea that some aspects of the demo are only discovered if you wait long enough and Math.random() is kind to you, but it was a risky bet, and I&#39;m convinced that many viewers did not wait to see the crystals fly. We&#39;ll see that a challenge from the excellent <a title="Román Cortés" href="//romancortes.com/">Román Cortés</a> (and <a title="RegPack" href="//github.com/Siorki/RegPack">some improvements in the compression tools</a>) brought me to improve this in my second and final version.</p>
<p>In <a href="/2013/04/js1k-2013-part-2-tunnel-generation" title="tunnel generation">the next part</a>, I get technical and describe the tunnel generation algorithm.</p>
<p>Note: the annotated code is available <a href="//github.com/ehouais/js1k">here</a>.</p>
        </div>
    </body>
</html>